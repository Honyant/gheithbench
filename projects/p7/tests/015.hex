@0
//instruction comment format = [instruction] : [pc] //[additional comments]

//This test tests non-RAW(Read After Write) hazard instructions 
//to test fundamental reading, writing and basic control flow
//as well as halting correctly

//Setting jump targets
830a // movl r10, 48 :0
836b // movl r11, 54 :2
83cc // movl r12, 60 :4
83ed // movl r13, 62 :6
870e // movl r14, 112 :8

//testing movl, subtract, and writing when rt = 0
8011 // movl r1, 1  :10
8322 // movl r2, 50 :12

/////// no-ops
801f // movl r15, 1 :14
801f // movl r15, 1 :16
801f // movl r15, 1 :18
801f // movl r15, 1 :20
801f // movl r15, 1 :22
801f // movl r15, 1 :24

0210 // sub r0, r2, r1 :26 // print '1' successfully if correctly subtracted

//testing signed jump
0123 // sub r3, r1, r2 :28

/////// no-ops
801f // movl r15, 1 :30
801f // movl r15, 1 :32
801f // movl r15, 1 :34
801f // movl r15, 1 :36
801f // movl r15, 1 :38
801f // movl r15, 1 :40

e32a // js r10, r3  :42 // jump to pc = 48
8300 // movl r0, 48 :44 // print '0' for unsuccessful jump
1000 // halt        :46
8320 // movl r0, 50 :48 // print '2' if jumped successfully


//testing reading zero and basic jz/jnz/jns (should not be read-after-write because r0 always reads 0)
e00b // jz r11, r0  :50 // should jump to pc = 54
1000 // halt        :52
8330 // movl r0, 51 :54 // print '3' if successfully jumped
e01c // jnz r12, r0 :56 // Jumps to a halt early at pc = 60
e03d // jns r13, r0 :58 // jump to pc = 62
1000 // halt        :60 
8340 // movl r0, 52 :62 // print '4' if successfully jumped

//testing correct movh handling
8ff3 // movl r3, 255 :64
8ff4 // movl r4, 255 :66

/////// no-ops
801f // movl r15, 1 :68
801f // movl r15, 1 :70
801f // movl r15, 1 :72
801f // movl r15, 1 :74
801f // movl r15, 1 :76
801f // movl r15, 1 :78

9013 // movh r3, 1 :80

/////// no-ops
801f // movl r15, 1 :82
801f // movl r15, 1 :84
801f // movl r15, 1 :86
801f // movl r15, 1 :88
801f // movl r15, 1 :90
801f // movl r15, 1 :92

0435 // sub r5, r4, r3 :94

/////// no-ops
801f // movl r15, 1 :96
801f // movl r15, 1 :98
801f // movl r15, 1 :100
801f // movl r15, 1 :102
801f // movl r15, 1 :104
801f // movl r15, 1 :106

e52e // js r14, r5 :108 //jump to 112
1000 // halt :110
8350 // movl r0, 53 :112 // print '5' successfully if movh'd correctly

//Testing weak jump decode handling (deducing a jump instruction from only first 4 bits)
//Behavior could be undefined if you jump here

efff // halt        :114 //(first half of the jump opcode of (0111))
8340 // movl r0, 52 :116 //should not be seeing '5', check if you halt properly

/////// no-ops
801f // movl r15, 1
801f // movl r15, 1
801f // movl r15, 1
801f // movl r15, 1
801f // movl r15, 1
